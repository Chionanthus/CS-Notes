### CAP理论

* Consistency：对所有节点访问同一个数据返回的是相同的结果
* Availablity：非故障的节点在合理的时间内返回合理的响应
* Partition Torlerance：当网络分区发生时，仍能提供服务

意思是：分布式框架里，当发生网络分区时，**强一致性和可用性只能二选一**


AC

    不能接受网络分区，则为单机应用，则不为分布式系统

CP（**一致性**与网络分区容忍）

    节点数据不同步时不提供服务，ZooKeeper和HBase等是CP架构

AP（可用性与网络分区容忍）

    查询到的信息可能不是最新的，Eureka是AP架构

### BASE理论

是对CAP理论中AP方案的一个补充

* Basic Available 基本可用：当分布式系统出现故障时，允许损失部分可用性
* Soft state 软状态：允许系统中的数据存在中间状态（数据不一致），并认为盖中间状态的存在不会影响系统的真题可用性，允许系统在不同节点的数据副本之间进行数据同步的过程中存在延时
* Eventually Consistent 最终一致性：系统中的所有副本，再经过一段时间的同步后，最终能到达一个一致的状态。

分布式系统的三种一致性级别：

* 强一致性：系统写入什么，读出来就是什么
* 弱一致性：不一定读取到最新写入的值，也不保证多少时间内读取到的数据会是最新的，但系统会尽量保证某个时刻达到数据一致性。从更新操作开始，到系统保证任何观察者看到的值都是最新的，这期间称为不一致窗口
* 最终一致性：系统会保证在一定时间内达到数据的一致状态；如果没有对某个对象新的更新操作，最终所有的访问将返回这个对象的最后更新的值

### 2PC 两阶段提交

* 事务管理器要求每个涉及到事务的数据库预提交此操作，并反映是否可以提交
* 事务协调器要求每个数据库提交数据，或者回滚数据
